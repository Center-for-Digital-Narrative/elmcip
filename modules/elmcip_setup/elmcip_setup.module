<?php
/**
 * @file
 * Code for the Setup ELMCIP feature.
 */

include_once 'elmcip_setup.features.inc';

/**
 * Remove temporary index tables from views_export.
 *
 * Temporary index tables that have been left
 * behind. This is caused by batch processes which are
 * started but never finished.
 */
function elmcip_setup_update_7001() {
  if (module_exists('views_data_export')) {
    views_data_export_garbage_collect(0, -1);
  }
}

/**
 * Implements hook_block_info().
 */
function elmcip_setup_block_info() {
  return array('sosical_networks' => array(
    'info' => t('Social networks assosiated with ELMCIP.'),
    'cache' => 'DRUPAL_CACHE_GLOBAL',
    'weight' => 0,
    'status' => 1,
    'region' => 'header_top',
    'theme' => 'elmcip',
  ));
}

/**
 * Implements hook_block_view().
 */
function elmcip_setup_block_view($delta = '') {
  switch ($delta) {
    case 'sosical_networks':
      $content =  array(
        '#type' => 'markup',
        '#markup' => '
        <ul class="menu social">
          <li><a href="https://vimeo.com/elmcip"><i class="fa fa-vimeo-square"></i></a></li>
          <li><a href="https://twitter.com/elmcip"><i class="fa fa-twitter-square"></i></a></li>
          <li><a href="https://www.facebook.com/groups/480202502024095"><i class="fa fa-facebook-square"></i></a></li>
        </ul>',
      );
      $block = array(
        'content' => render($content),
      );
      return $block;

    default:
      break;
  }
}
